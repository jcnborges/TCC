\chapter{Fundamentação Teórica}
\label{chap:fundteor}

Este capítulo apresentará a fundamentação teórica desse trabalho de conclusão de curso. Será descrito o estado inicial do projeto e do robô Bellator, com uma visão geral deste ao ser entregue à equipe, a especificação do robô após a reconstrução, a apresentação da Lógica Fuzzy e da metodologia de Mapas Cognitivos Fuzzy (FCM).

%---------- Estado inicial do Projeto ----------
\section{Estado Inicial do Projeto} \label{sec:estpro}

Esta seção visa descrever com quais recursos a equipe iniciou a execução do trabalho, tanto materiais como intelectuais, ou seja, a situação do robô e seus componentes de hardware, o principal e mais importante recurso material desse projeto, os componentes de software e a documentação de ambos, da forma como foi entregue à equipe.

\subsection{Visão Geral}

O robô disponibilizado à equipe para a realização desse trabalho, o Bellator, é resultado de um projeto não concluído, visando a implementação de uma plataforma robótica controlada remotamente por joystick. Para tal, o robô foi dividido em três camadas: baixo nível, alto nível e supervisório. A camada de baixo nível seria responsável por controlar os motores do robô, bem como receber leituras dos sensores do mesmo. A camada de alto nível comunicar-se-ia com a camada de baixo nível via conexão serial, faria obtenção de vídeo através de uma webcam e comunicar-se-ia com a camada supervisória através de uma conexão sem fio. Esta última seria a interface com o usuário para realizar o controle remoto do robô. O diagrama esquemático da figura \ref{fig:diagsis} demonstra essa situação.

\begin{figure}[!htb]
	\centering
	\includegraphics[width=0.8\textwidth]{./figs/diagsis.png}
	\caption[Diagrama original do Bellator]{Diagrama original do projeto Bellator, retirado da monografia do mesmo.}
	\fonte{\cite{BELLATOR}}
	\label{fig:diagsis}
\end{figure}

A partir da figura \ref{fig:diagsis}, o funcionamento do projeto Bellator pode ser explicado. A camada de baixo nível é composta pelo robô Bellator, equipado com dois motores elétricos Bosch FPG 12V, cinco sensores de distância ``2Y0A02F98"~ da Sharp, uma bateria Unybatt 12V-7,2 Ampére hora, duas pontes H e a placa microcontrolada C8051F340, capaz de ler e converter leituras de tensão analógicas dos sensores do robô bem como produzir sinais de controle para os motores do robô. Esta placa está conectada à camada de alto nível, composta por um PC Embarcado VIA EPIA ME60000 Mini-ITX com sistema operacional Linux, através de uma conexão serial. Utilizando-se de um protocolo de comunicação, esse PC embarcado envia comandos de movimentação para a camada de baixo nível e recebe as leituras dos sensores obtidas pela camada de baixo nível. O PC embarcado também comunica-se com a camada de alto nível para receber comandos de movimentação do usuário e enviar as leituras dos sensores para o mesmo. Além disso, o PC embarcado envia, também via comunicação sem fio, um stream de vídeo gerado por uma webcam Genius iLook 316. Finalmente, o software supervisor remoto, executado em um PC com máquina virtual Java, fornece as informações recebidas da camada de alto nível para o usuário, permitindo-o tomar decisões sobre a locomoção do robô. O software também recebe comandos de movimentação do usuário, gerados em um Joystick do videogame Sony Playstation 2, enviando-os para a camada de alto nível pela mesma conexão.

O leitor pode observar que o projeto Bellator apresenta objetivos muito distintos do projeto ``Algoritmos de Navegação Fuzzy: Uma Análise Qualitativa". Assim, não será feita uma descrição detalhada de todos os componentes do projeto Bellator, entretanto, pode-se consultar a referência \cite{BELLATOR} para mais informações. A seguir, será descrito como o robô foi recebido pela equipe e quais componentes foram reaproveitados.

\subsection{Recebimento do Robô}
\label{sec:recrobo}

O robô Bellator foi entregue à equipe em Abril de 2011, em uma caixa, desmontado, juntamente com toda a documentação disponível por mídia digital. A caixa continha os seguintes itens:

\begin{itemize}
\item Chassi do robô Bellator com dois motores Bosch FPG12V e pontes H acoplados;
\item Cinco sensores de distância ``2Y0A02F98"~ da Sharp;
\item Duas baterias Unybatt 12V-7,2 Ampére hora;
\item Uma placa micro-controlada C8051F340;
\item Uma placa de roteamento, produzida pelo projeto Bellator;
\item Um PC Embarcado VIA EPIA ME60000 Mini-ITX.
\end{itemize}

O chassi do robô e seus componentes acoplados são a base da plataforma robótica a ser utilizada pela equipe e são críticas para a execução desse trabalho. Os sensores de distância, um a menos que os disponíveis no projeto Bellator, são essenciais para a localização do robô e de obstáculos. A placa microcontrolada também é um recurso crítico, pois é o componente responsável por todo o controle de baixo nível do robô cujo software e a documentação serão reaproveitados do projeto Bellator. As baterias são um recurso necessário e de fácil aquisição, ao contrário dos outros componentes citados.

Alguns itens mencionados na seção anterior, referentes ao projeto Bellator, não foram recebidos ou não serão utilizados nesse trabalho. A webcam e joystick não foram entregues pois não serão necessários, visto que um sistema de navegação autônomo não necessita de joystick e esse trabalho não abordará navegação através de imagem de vídeo. A placa de roteamento entregue será utilizada nos testes dos componentes, visto que é essencial para o funcionamento do robô. Esta placa será reprojetada e reconstruída. O PC embarcado foi entregue destituído de qualquer documentação. Além disso, como o novo objetivo do robô não necessita de comunicação sem fio e não utilizará stream de vídeo, motivo principal para a utilização deste PC no projeto anterior, a equipe optou por descartar este recurso do projeto e utilizar outra placa mais simples e menor, que será descrita em detalhes na seção \ref{chap:esprob}.

A documentação disponível à equipe, produzida durante o projeto Bellator, descreve em detalhes os componentes de hardware dessa plataforma robótica, o software de controle supervisório e a camada de baixo nível, ou seja, o software da placa C8051F340\cite{BELLATOR}. Essa documentação será utilizada como referência para o reaproveitamento do projeto Bellator nesse trabalho, com exceção da documentação referente ao software de controle supervisório, que não será utilizado. O processo de reconstrução e adaptação da plataforma robótica é descrito em detalhes no capítulo \ref{chap:desenv}.

\subsection{Considerações}
A possibilidade de reaproveitamento parcial do projeto Bellator e o recebimento desse material consistiram uma importante etapa nesse trabalho. A plataforma Bellator é uma opção de recurso ao apoio do estudo qualitativo proposto nesse TCC.

\input{especificacao}

\section{Lógica Fuzzy}
\label{sec:logfuzzy}
Esta seção descreve os conceitos fundamentais utilizados pela equipe para o entendimento e implementação do algoritmo de navegação fuzzy, descrito em detalhes na seção \ref{sec:algfuzzy}.

\subsection{Conjuntos Fuzzy}

A teoria de conjuntos fuzzy foi elaborada inicialmente por Lofti Zadeh \cite{ZADEH}, visando explorar a possibilidade de criar um novo critério de afiliação à conjuntos. Na teoria clássica de conjuntos, um elemento pode apenas pertencer ou não a um conjunto, sendo impossível um nível de pertinência parcial. Já em um conjunto fuzzy, isto torna-se possível.
Um conjunto fuzzy pode ser definido por um conjunto de pares ordenados com o elemento e sua pertinência ao conjunto fuzzy. Seja F um conjunto fuzzy e X um conjunto de objetos arbitrários, tem-se:

\begin{equation}
F=\{(x,f(x)),x\in X\}, f(x) = [0,1]
\end{equation}

Assim sendo, considere um conjunto ``A"~ simples que contenha tudo o que tem sabor doce. Neste conjunto uma barra de chocolate é doce da mesma forma que cana de açucar, visto que ambos pertencem ao conjunto, ou seja:
(barra de chocolate) $\in$ A e (cana de açucar) $\in$ A
Em um conjunto fuzzy B que contemple tudo o que tem sabor doce, torna-se possível atribuir um nível de afiliação ao conjunto através de uma função de pertinência f  permitindo dizer que, por exemplo, a cana de açucar é doce com nível de pertinencia 1, enquanto que a barra de chocolate é doce com nível de pertinência 0.8, ou seja:\\*

\begin{center}
((cana de açucar),f(cana de açucar)) $\in$ B, f(cana de açucar) = 1\\*
((barra de chocolate),f(barra de chocolate)) $\in$ B, f(barra de chocolate) = 0.8\\*
\end{center}

Isto aproxima-se mais da forma como a cognição e intuição humana funcionam, que frequentemente usa-se de palavras como ``mais"~, ``muito"~, ``pouco"~, entre outras, para definir graus de pertinência a conjuntos de uma forma subjetiva.

\subsection{Variável Linguística}
\label{varling}

Uma aplicação direta de conjuntos fuzzy é a definição de variáveis linguísticas. \cite{PEDRYCZ}
Considerando que variável x pode assumir um valor qualquer dentro de um dado conjunto A, pode-se definir como uma variável linguística como uma variável cujo conjunto A de valores possíveis para a mesma é um conjunto de termos linguísticos, tais como, por exemplo, alto, baixo, curto, longo, entre outros. Pode-se estender este conceito associando cada termo linguístico possível de uma variável linguística a um conjunto fuzzy.

Para entender esta definição, considere a variável linguística Temperatura (T) composta pelos termos linguísticos frio, morno e quente:
\begin{equation}
T = \{frio, morno, quente\}
\end{equation}
Considere também os seguintes conjuntos fuzzy:
\begin{equation}
	\begin{array}{lcl}
		F & = & \{(t,f(t)),t \in \mathbb{R}\} \\
		M & = & \{(t,m(t)),t \in \mathbb{R}\} \\
		Q & = & \{(t,q(t)),t \in \mathbb{R}\} \\
	\end{array}
\end{equation}
sendo \emph{\mbox{f(t), m(t) e q(t)}} funções de pertinência, respectivamente, aos conjuntos fuzzy \emph{\mbox{F, M e Q}}, com valores de pertinência pertencentes ao intervalo [0,1] e \emph{t} uma variável representando a temperatura em um material qualquer. Considere ainda a associação dos conjuntos fuzzy \emph{\mbox{F, M e Q}} aos termos linguísticos frio, morno e quente, respectivamente. Neste cenário, um dado valor para a variável \emph{t} pode ser traduzido em um valor equivalente para a variável linguística \emph{T}, dependendo apenas da definição das funções de pertinência \emph{\mbox{f(t), m(t) e q(t)}}.

\begin{figure}[!htb]
	\centering
	\includegraphics[width=0.8\textwidth]{./figs/fuzzygraph.png}
	\caption[Exemplo de Pertinências Fuzzy]{Funções de Pertinência f(t), m(t), q(t).}
	\label{fig:fuzzygraph}
\end{figure}

Se considerarmos, por exemplo, a definição gráfica para as funções \emph{\mbox{f(t), m(t) e q(t)}} dada na figura \ref{fig:fuzzygraph}, e três valores de temperatura, \emph{\mbox{t1 = 30, t2 = 50 e t3 = 90}}, temos que os valores correspondentes de temperatura para a variável linguística T são \mbox{T1 = (0.5 frio, 0.5 morno, 0.0 quente)}, \mbox{T2 = (0.0 frio, 1.0 morno, 0.0 quente)} e \mbox{T3 = (0.0 frio, 0.0 morno, 1.0 quente)}, respectivamente. Ou seja, informalmente, a temperatura t1 é representa que o material está ``meio frio"~ e ``meio morno"~, a temperatura t2 indica que está ``morno"~ e a temperatura t3, por sua vez, ``quente"~. Este processo de conversão para uma variável linguística é comumente chamado de ``fuzzificação".


\subsection{Controle Fuzzy}
\label{sec:fuzzycontrol}
Após definidas as variáveis linguísticas, conjuntos fuzzy e suas funções de pertinência, descritas na seção \ref{varling}, pode-se construir um controle fuzzy baseado em um conjunto de regras de inferência.

Regras de inferência sobre conjuntos fuzzy podem ser categorizadas como uma generalização do \emph{modus ponens} binário. Em lógica binária, dada regra ``se X então Y", onde X e Y são variáveis binárias, a partir do momento que a premissa, representada pela variável X, assume valor lógico verdadeiro, a conclusão, dada por Y, é verdadeira também. Em lógica fuzzy, o mesmo raciocínio é valido, porém X e Y são variáveis linguísticas, e as regras de inferência são definidas a partir dos valores que estas variáveis linguísticas podem assumir, permitindo inclusive ativação parcial de regras de inferência. Extendendo o exemplo das temperaturas, apresentado na seção \ref{varling}, imagine que deseja-se controlar a velocidade de um \emph{cooler} de processador, de acordo com a temperatura que este se encontra, utilizando um controle fuzzy. As regras de inferência para este controle podem ser, por exemplo:
\begin{center}
    Se \emph{morno} então \emph{medio}\\*
    Se \emph{quente} então \emph{forte}
\end{center}
Sendo ``medio"~ e ``forte"~ valores possíveis da variável linguística Velocidade (V), que controla a velocidade do \emph{cooler}, com ``medio"~ correspondendo a função de pertinência vm e ``forte"~ correspondendo a vf, apresentados na figura \ref{fig:defuzzygraph}:

\begin{figure}[!htb]
	\centering
	\includegraphics[width=0.8\textwidth]{./figs/defuzzygraph.png}
	\caption[Exemplo de Pertinências Fuzzy - Defuzzificação]{Funções de Pertinência vm e vf.}
	\label{fig:defuzzygraph}
\end{figure}

De acordo com estas regras de inferência, se a temperatura \emph{fuzzificada} for inteiramente fria, nenhuma regra será ativada e a velocidade do \emph{cooler} será nula. Porém, se a temperatura for maior que a mínima necessária para começar a ser classificada como morna, haverá ativação integral ou parcial de uma ou ambas as regras de inferência. Neste caso, é necessário determinar o grau de ativação de cada uma das regras e produzir uma saída que contemple estes graus de ativação, que é o processo inverso à \emph{fuzzificação}, a \emph{defuzzificação}. Um destes métodos é a média do máximo, que consiste da média ponderada dos máximos de cada valor fuzzy de saída, com os pesos correspondendo às ativações das regras de inferência. Considerando novamente o exemplo do controle de velocidade de um \emph{cooler} e considerando que, em um determinado momento, a temperatura está ``meio morno"~ e ``meio quente"~, ou seja, 0.5 de pertinência à classe ``morno"~ e a classe ``quente"~, ambas as regras serão ativadas igualmente e a velocidade do \emph{cooler} será:
\begin{equation}
v = \frac{\left( 0.5*50 + 0.5*100 \right ) } {1} = 75
\end{equation}

\subsection{Considerações}

O conceito de incerteza introduzido pela Lógica Fuzzy permite a modelagem de sistemas com problemas de decisão cujas variáveis são dinâmicas, reduzindo a influencia de ruídos e possibilitando a construção de um sistema de inferências análogo à cognição humana. O problema de navegação robótica altamente dinâmico, pois as decisões são tomadas sob a influência de vários sensores simultaneamente, todos passíveis de ruído, e a abordagem Fuzzy é uma opção plausível para tratá-lo.

\section{Mapas Cognitivos Fuzzy}
\label{sec:fcm}
Esta seção tem como objetivo explicar o que são mapas cognitivos fuzzy, também conhecidos como FCM (Fuzzy Cognitive Maps), abordando o conceito, a estrutura, as propriedades e vantagens desse modelo, apresentar os passos para contrução de um FCM e apresentar exemplos, que descrevem o uso em situações reais.

O modelo FCM é abordado na tese de doutorado de \cite{FCMENDONCA}. Mapas cognitivos são diagramas que representam ligações entre palavras, idéias, tarefas ou outros itens ligados a um conceito central, dispostos radialmente, intuitivamente e de acordo com a importância de cada conceito. Crenças ou afirmações a respeito de um domínio de conhecimento limitado são expressas por palavras ou expressões linguísticas interligadas por relações de causa e efeito, que possibilitam predizer as consequências que essa organização implica ao universo representado. O mapa cognitivo fuzzy é gerado quando se incluem a essa estrutura incertezas através da lógica Fuzzy.

\begin{figure}[!htb]
    \centering
    \includegraphics[width=0.5\textwidth]{./figs/fcm.png}
    \caption[Exemplo de um FCM]{Exemplo de um FCM (grafo).}
    \fonte{\cite{FCMENDONCA}}
    \label{fig:fcm}
\end{figure}

A estrutura de um FCM é um grafo direcionado, figura \ref{fig:fcm}, em que os valores numéricos são variáveis ou conjuntos fuzzy, os ``nós"~ são conceitos linguísticos, representados por conjuntos fuzzy e cada ``nó"~ é associado a outros nós através de conexões (relacionamentos), a cada qual está associado um peso numérico, que representa a variável fuzzy relacionada ao nível de causalidade entre os conceitos. De acordo com \cite{MENDONCA}, um FCM suporta diversos tipos de conceitos e relacionamentos:

\begin{itemize}
    \item Conceito de nível: Esse conceito pode pode ser representado por um valor absoluto;
    \item Conceito de variação: Esse tipo de conceito representa a variação de um valor no tempo;
    \item Conceitos de entradas: Esses conceitos recebem um valor de entrada e podem interagir com outros conceitos;
    \item Conceitos de saída ou de decisão: Esses conceitos representam o resultado das inferências do FCM e não interagem com outros conceitos;
    \item Relações causais: Essas conexões representam as relações de causa e efeito entre os conceitos e são calculadas através da matriz de pesos (matriz W);
    \item Declarações condicionais: Esses elementos são as relações causais expressas na forma de regras \emph{se-então} e são atualizadas temporalmente.
\end{itemize}

Na figura \ref{fig:fcm}, os conceitos (C1 a C5) podem ser atualizados através da interação com outros conceitos por meio das relações causais ($w_{i,j}$) e com seu próprio valor. A matriz \ref{fcm-matrix} representa o peso das relações causais entre os conceitos e podem ser atualizados através da equação \ref{fcm-update}. Esta descreve a evolução do FCM, na qual j é o contador das iterações, n é o número de nós do grafo, $W_{ji}$ é o peso do arco que conecta o conceito $C_j$ ao conceito $C_i$, $A_i$ e $A_i^{anterior}$ são o valor do conceito $C_i$ na iteração atual e anterior, respectivamente, e a função f \ref{sigmoide} é uma função do tipo sigmóide.

\begin{equation}\label{fcm-matrix}
    w_{i,j}=\left(
       \begin{array}{ccccc}
         0 & w_{12} & 0 & 0 & w_{15} \\
         0 & 0 & w_{23} & 0 & w_{25} \\
         0 & w_{32} & 0 & w_{34} & 0 \\
         w_{41} & 0 & w_{43} & 0 & w_{45} \\
         w_{51} & 0 & 0 & w_{54} & 0 \\
       \end{array}
     \right)
\end{equation}

\begin{equation}\label{fcm-update}
A_i=f(\sum_{\substack{j=1 \\ j\neq i}}^{n} A_j \times W_{ji})+A_i^{anterior}
\end{equation}

\begin{equation}\label{sigmoide}
f(x)=\frac{1} {1+e^{-\lambda x}}
\end{equation}

Em \cite{KOSKO}, são apresentados os seguintes passos para construção de um FCM clássico:

\begin{itemize}
\item Passo 1 - Identificação dos conceitos e das suas interconexões ou relações
determinando a natureza (positiva, negativa ou neutra) das relações causais entre
conceitos;
\item Passo 2 - Aquisição de dados iniciais, através de ponderação de opinião de
especialistas e ou análise do sistema de equações, quando se conhece o modelo
matemático;
\item Passo 3 - Apresentação dos dados referentes à opinião dos diversos especialistas a
um sistema lógico fuzzy que tem como saída os valores dos pesos do FCM;
\item Passo 4 - Tratamento da informação, adaptação e ou otimização do FCM
inicialmente proposto, ajustando suas respostas às saídas desejadas;
\item Passo 5 - Validação do FCM ajustado nas condições de operação do sistema ou
processo modelado.
\end{itemize}

Um FCM apresenta as propriedades de elasticidade e estabilidade, sendo que a elasticidade, ou auto organização, é a capacidade de reforçar ou enfraquecer o peso das relações causais e a estabilidade é a capacidade de o mapa evoluir, estabilizando-se em um ponto fixo ou após um número máximo de iterações. Uma vantagem do FCM é a modularidade, a qual permite que um problema complexo seja representado por vários mapas modulares e outra vantagem é que os pesos das relações causais e dos conceitos podem ser obtidos via treinamento a partir dos dados históricos do sistema ou através de um algoritmo adaptativo, que atualiza os pesos constantemente.

\begin{figure}[!htb]
    \centering
    \includegraphics[width=0.5\textwidth]{./figs/fcm-exemplo-planta.png}
    \caption[Aplicação do FCM em processo industrial]{Aplicação do FCM em processo industrial.}
    \fonte{\cite{GROUMPOS}}
    \label{fig:fcm-exemplo-planta}
\end{figure}

Em \cite{GROUMPOS} os mapas cognitivos fuzzy são aplicados no controle de processos industriais. Um exemplo de aplicação é mostrado na figura \ref{fig:fcm-exemplo-planta}, na qual é ilustrado um tanque com duas válvulas de entrada (V1 e V2) para diferentes tipos de líquidos, um misturador, uma válvula de saída (V3) para o líquido misturado e um medidor de massa específica (G) que mede a quantidade de líquido produzida. As válvulas V1 e V2 introduzem dois líquidos diferentes. Durante a mistura, o medidor de massa específica verifica quando o produto atingiu o ponto adequado e, desse modo, a válvula V3 é ativada e o produto da mistura é esvaziado. Analisando-se o problema, os seguintes conceitos podem ser definidos:

\begin{itemize}
\item Conceito 1: Volume de líquido no tanque, o qual depende do estado das válvulas V1, V2 e V3;
\item Conceito 2: Estado da válvula 1 (fechada, aberta ou parcialmente aberta);
\item Conceito 3: Estado da válvula 2 (fechada, aberta ou parcialmente aberta);
\item Conceito 4: Estado da válvula 3 (fechada, aberta ou parcialmente aberta);
\item Conceito 5: Valor de massa específica do líquido medido pelo sensor G.
\end{itemize}

O controlador do processo deve manter as variáveis V e G, sendo V o volume e G a massa especifica do produto no tanque, dentro das faixas de operação $[V_{min}, V_{max}]$ (equação \ref{lim-V}) e $[G_{min}, G_{max}]$ (equação \ref{lim-G}), respectivamente.

\begin{equation}\label{lim-V}
V_{min}<V<V_{max}
\end{equation}

\begin{equation}\label{lim-G}
G_{min}<G<G_{max}
\end{equation}

Interligando-se os conceitos através de relações de causa e efeito, o FCM da figura \ref{fig:fcm-exemplo-fcm} foi construído.

\begin{figure}[!htb]
    \centering
    \includegraphics[width=0.5\textwidth]{./figs/fcm-exemplo-fcm.png}
    \caption[Mapa Cognitivo Fuzzy]{FCM do controlador.}
    \fonte{\cite{GROUMPOS}}
    \label{fig:fcm-exemplo-fcm}
\end{figure}

 Analisando-se o conhecimento dos especialistas, os pesos das relações são dados pelas inequações \ref{peso-1} a \ref{peso-8}.

\begin{equation}\label{peso-1}
-0,50<w_{12}<0,30
\end{equation}
\begin{equation}\label{peso-2}
-0,40<w_{13}<0,20
\end{equation}
\begin{equation}\label{peso-3}
0,20<w_{15}<0,40
\end{equation}
\begin{equation}\label{peso-4}
0,30<w_{21}<0,40
\end{equation}
\begin{equation}\label{peso-5}
0,40>w_{31}<0,50
\end{equation}
\begin{equation}\label{peso-6}
-1,0<w_{41}<0,80
\end{equation}
\begin{equation}\label{peso-7}
0,50<w_{52}<0,70
\end{equation}
\begin{equation}\label{peso-8}
0,30<w_{54}<0,40
\end{equation}

O controlador do processo foi executado e, após a estabilização, obtiveram-se os pesos da matriz \ref{W-matrix} e os valores dos conceitos da matriz \ref{A-matrix}. Os limites das equações \ref{lim-V} e \ref{lim-G} são reajustados para os valores correspondentes às equações \ref{lim-V-adj} e \ref{lim-G-adj}, respectivamente, correspondendo ao ponto de operação desejado.

\begin{equation}\label{W-matrix}
    W^{inicial}=\left(
       \begin{array}{ccccc}
         0,00 & -0,40 & -0,25 & 0,00 & 0,30 \\
         0,36 & 0,00 & 0,00 & 0,00 & w0,00 \\
         0,45 & 0,00 & 0,00 & 0,00 & 0,00 \\
         -0,90 & 0,00 & 0,00 & 0,00 & 0,00 \\
         0,00 & 0,60 & 0,00 & 0,30 & 0,00 \\
       \end{array}
     \right)
\end{equation}

\begin{equation}\label{A-matrix}
    A^{inicial}=\left(
       \begin{array}{ccccc}
         0,10 & 0,45 & 0,39 & 0,04 & 0,01 \\
       \end{array}
     \right)
\end{equation}

\begin{equation}\label{lim-V-adj}
0,68<V<0,70
\end{equation}

\begin{equation}\label{lim-G-adj}
0,78<G<0,85
\end{equation}

Nesse exemplo, a estabilização (ou sintonia) foi realizada através de três métodos: RNA (Rede Neural Artificial), AG (Algoritmo Genético) e PSO (Particle Swarm Optimization ou Otimização por Enxame de Partículas).

Outra aplicação é descrita no artigo \cite{MENDONCA}, na qual a abordagem FCM é empregada em navegação robótica. Nesse artigo, um modelo de FCM novo é implementado para suportar as condições dinâmicas dos sistemas de navegação, nas quais os valores das relações causais são modificados dinamicamente através da ocorrência de eventos especiais. Os autores do artigo chamaram esse modelo de ED-FCM (Event-Driven Fuzzy Cognitive Map).

\begin{figure}[!htb]
    \centering
    \includegraphics[width=0.5\textwidth]{./figs/reinforcement.png}
    \caption[Algoritmo de aprendizado por reforço]{Algoritmo de aprendizado por reforço.}
    \fonte{\cite{MENDONCA}}
    \label{fig:reinforcement-alg}
\end{figure}

O ajuste dos pesos das relações causais é efetuado por um algoritmo de aprendizado por reforço, conforme ilustra a figura \ref{fig:reinforcement-alg}, e permite que o robô (agente) aprenda diretamente através de sua interação com o ambiente. A cada instante de tempo t, o agente estabelece, por meio de seus sensores, um estado st e, de acordo com suas regras, determina uma ação at a ser efetuada pelos atuadores. Essa ação causa uma transição para o estado $s_{t+1}$ e o ambiente retorna uma medida de reforço $r_{t+1}$, que pode ser uma recompensa (caso a ação seja boa) ou uma punição (caso a ação seja ruim).

\begin{figure}[!htb]
    \centering
    \includegraphics[width=0.5\textwidth]{./figs/fcm-robot.png}
    \caption[FCM do comportamento reativo do robô]{FCM do comportamento reativo do robô.}
    \fonte{\cite{MENDONCA}}
    \label{fig:fcm-robot}
\end{figure}

O FCM descreve o comportamento reativo do robô (figura \ref{fig:fcm-robot}), no qual a leitura dos sensores de distância (esquerdo, frontal e direito) levam a uma ação imediata que interfere no movimento. Os conceitos RS, FS e LS representam as leituras dos sensores, os conceitos LO e RO representam as decisões de virar à esquerda ou virar à direita, respectivamente,  decisões anteriores, representadas pelos conceitos LO(-1) e RO(-1), exercem influência sobre as decisões atuais e a saída do algoritmo é representada pelos conceitos \emph{Out Left}, \emph{Out Front} e \emph{Out Right}. As relações causais do mapa são descritas na tabela \ref{tab:causal-relations} e as regras de a seguir determinam o comportamento do mapa:

\begin{enumerate}
\item SE a intensidade do sensor frontal (FS) for maior que um limiar médio ENTÃO $W_{lim}$ aplicado para computar o relacionamento $w_3$ é o valor máximo de $WF_{max}$;
\item SE a intensidade do sensor frontal (FS) for menor que um limiar mínimo ENTÃO $W_{lim}$ aplicado para computar o relacionamento $w_3$ é o valor mínimo de $WF_{min}$;
\item SE a intensidade do sensor direito (RS) for maior que um limiar médio ENTÃO $W_{lim}$ aplicado para computar o relacionamento $w_1$ é o valor máximo de $WR_{max}$;
\item SE a intensidade do sensor direito (RS) for menor que um limiar mínimo ENTÃO $W_{lim}$ aplicado para computar o relacionamento $w_1$ é o valor mínimo de $WR_{min}$;
\item SE a intensidade do sensor esquerdo (LS) for maior que um limiar médio ENTÃO $W_{lim}$ aplicado para computar o relacionamento $w_5$ é o valor máximo de $WL_{max}$;
\item SE a intensidade do sensor direito (LS) for menor que um limiar mínimo ENTÃO $W_{lim}$ aplicado para computar o relacionamento $w_5$ é o valor mínimo de $WL_{min}$.
\end{enumerate}

\begin{table}[htb!]
	\centering
	\caption[Relações causais do controlador do robô]{Relações causais do controlador do robô.}		
	\begin{tabular}[!htb]{ l l l l }
	  \hline
	  Relação causal & Descrição & Efeito & Intensidade \\
	  \hline
	  $w_1$ & Sensor direito (RS) incluencia a saída esquerda (LO) & Positivo & Forte \\
	  $w_2$ & Sensor frontal (FS) incluencia a saída esquerda (LO) & Positivo & Médio \\
	  $w_3$ & Sensor frontal (FS) incluencia a saída frontal (FO) & Positivo & Forte \\
	  $w_4$ & Sensor frontal (FS) incluencia a saída direita (RO) & Positivo & Médio \\
	  $w_5$ & Sensor esquerdo (LS) incluencia a saída direita (RO) & Positivo & Forte \\
	  $w_6$ & Sensor esquerdo (LS) incluencia a saída direita (RO) & Negativo & Fraco \\
	  $w_7$ & Sensor direito (RS) incluencia a saída esquerda (LO) & Negativo & Fraco \\
	  $w_8$ & Sensor direito (RS) incluencia a saída direita (RO) & Negativo & Fraco \\
	  $w_9$ & Sensor esquerdo (LS) incluencia a saída esquerda (LO) & Negativo & Fraco \\
	  \hline  	
	\end{tabular}
	\fonte{\cite{MENDONCA}}
	\label{tab:causal-relations}
\end{table}

Essas regras determinam a política de mudança de estados do mapa e os pesos dos relacionamentos são responsáveis pelas decisões de o robô virar à esquerda, acelerar ou virar à direita. Nesse contexto, o valor atual desses pesos depende da diferença entre os valores anteriores e o valor máximo admissível ponderado por um fator $\gamma$ . O incremento dos pesos também leva em conta o valor da recompensa ou punicão (r) e de um fator de aprendizagem $\alpha$ , os quais estão associados ao algoritmo de aprendizado por reforço escolhido, equação \ref{q-learning}.

\begin{equation}\label{q-learning}
w_i(k)=w_i(k-1)+\alpha \times [r+\gamma \times W_{lim}-w_i(k-1)]
\end{equation}

Por fim, nesse artigo, são descritos os resultados nos quais o robô, em simulação, foi capaz de desviar obstáculos à direita e à esquerda do mesmo ao longo da tragetória.

\subsection{Considerações}
O FCM representa um problema em termos de conceitos e relações causais, podendo ser empregado em controladores de processos industriais ou no controle de robôs autônomos. O problema do desvio de obstáculos em navegação robótica pôde ser modelado, conforme o exemplo apresentado (figura \ref{fig:fcm-robot}), através de três conceitos de entrada (RS, FS e LS), dois conceitos de decisão (RO e LO), três conceitos de saída (Right Out, Front Out e Left Out), relações causais, regras \emph{SE-ENTÃO} e um algoritmo de aprendizado. O controlador proposto permitiu que o robô desviasse obstáculos reagindo à leitura de sensores que medem a distância de objetos posicionados à esquerda e à direita do mesmo, concluido-se que a abordagem FCM é adequada para esse trabalho.

